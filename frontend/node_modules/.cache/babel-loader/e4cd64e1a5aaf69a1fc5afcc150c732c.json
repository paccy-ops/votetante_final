{"ast":null,"code":"import _slicedToArray from\"/Users/pacifique/Desktop/UC/apps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Button from'../shared/components/FormElements/Button';import{useSelector,useDispatch}from'react-redux';import Card from'../shared/components/UIElements/Card';import LoadingSpinner from'../shared/components/UIElements/LoadingSpinner';import{USER_UPDATE_PROFILE_RESET}from'../constants/UserConstant';import'./EditProfileScreen.css';import{getUserDetails,updateUserProfile}from'../Action/UserActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfileScreen(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),bio=_useState10[0],setBio=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setPassword=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),confirmPassword=_useState14[0],setConfirmpassword=_useState14[1];var dispatch=useDispatch();var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userUpdateProfile=useSelector(function(state){return state.userUpdateProfile;});var success=userUpdateProfile.success;useEffect(function(){if(!userInfo){history.push('/login');}else{if(!user||!user.name||success||userInfo.id!==user.id){dispatch({type:USER_UPDATE_PROFILE_RESET});dispatch(getUserDetails('profile'));history.push('/user/profile');}else{setName(user.name);setEmail(user.email);setLocation(user.location);setBio(user.bio);}}},[dispatch,userInfo,user,history,success]);var updateSubmitHandler=function updateSubmitHandler(e){e.preventDefault();if(password!==confirmPassword){setMessage('Password do not match');}else{dispatch(updateUserProfile({id:user.id,name:name,email:email,location:location,bio:bio,// image: image,\npassword:password}));}};return/*#__PURE__*/_jsx(\"form\",{onSubmit:updateSubmitHandler,children:/*#__PURE__*/_jsx(\"div\",{className:\"login-form-register\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-all\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"EDIT YOUR PROFILE \"}),message&&/*#__PURE__*/_jsx(Card,{className:\"error_message\",children:message}),error&&/*#__PURE__*/_jsx(Card,{className:\"error_message\",children:error}),loading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",placeholder:\"Enter Username\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",children:\"Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"address\",placeholder:\"Enter Address\",value:location,onChange:function onChange(e){return setLocation(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"bio\",children:\"Bio\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",id:\"bio\",placeholder:\"Write Bio\",value:bio,onChange:function onChange(e){return setBio(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",placeholder:\"Enter Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pasword2\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password2\",placeholder:\"Enter Password again\",value:confirmPassword,onChange:function onChange(e){return setConfirmpassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"SAVE PROFILE\"})]})})})});}export default EditProfileScreen;","map":{"version":3,"sources":["/Users/pacifique/Desktop/UC/apps/src/screen/EditProfileScreen.js"],"names":["React","useEffect","useState","Button","useSelector","useDispatch","Card","LoadingSpinner","USER_UPDATE_PROFILE_RESET","getUserDetails","updateUserProfile","EditProfileScreen","history","message","setMessage","name","setName","email","setEmail","location","setLocation","bio","setBio","password","setPassword","confirmPassword","setConfirmpassword","dispatch","userDetails","state","loading","error","user","userLogin","userInfo","userUpdateProfile","success","push","id","type","updateSubmitHandler","e","preventDefault","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Button from '../shared/components/FormElements/Button';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Card from '../shared/components/UIElements/Card';\nimport LoadingSpinner from '../shared/components/UIElements/LoadingSpinner';\nimport { USER_UPDATE_PROFILE_RESET } from '../constants/UserConstant';\nimport './EditProfileScreen.css';\nimport { getUserDetails, updateUserProfile } from '../Action/UserActions';\nfunction EditProfileScreen({ history }) {\n  const [message, setMessage] = useState('');\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [location, setLocation] = useState('');\n  const [bio, setBio] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmpassword] = useState('');\n\n  const dispatch = useDispatch();\n\n  const userDetails = useSelector((state) => state.userDetails);\n  const { loading, error, user } = userDetails;\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  const userUpdateProfile = useSelector((state) => state.userUpdateProfile);\n  const { success } = userUpdateProfile;\n\n  useEffect(() => {\n    if (!userInfo) {\n      history.push('/login');\n    } else {\n      if (!user || !user.name || success || userInfo.id !== user.id) {\n        dispatch({ type: USER_UPDATE_PROFILE_RESET });\n        dispatch(getUserDetails('profile'));\n        history.push('/user/profile');\n      } else {\n        setName(user.name);\n        setEmail(user.email);\n        setLocation(user.location);\n        setBio(user.bio);\n      }\n    }\n  }, [dispatch, userInfo, user, history, success]);\n\n  const updateSubmitHandler = (e) => {\n    e.preventDefault();\n\n    if (password !== confirmPassword) {\n      setMessage('Password do not match');\n    } else {\n      dispatch(\n        updateUserProfile({\n          id: user.id,\n          name: name,\n          email: email,\n          location: location,\n          bio: bio,\n          // image: image,\n          password: password,\n        })\n      );\n    }\n  };\n\n  return (\n    <form onSubmit={updateSubmitHandler}>\n      <div className='login-form-register'>\n        <div className='container-form'>\n          <div className='form-all'>\n            <h2>EDIT YOUR PROFILE </h2>\n            {message && <Card className='error_message'>{message}</Card>}\n            {error && <Card className='error_message'>{error}</Card>}\n            {loading && <LoadingSpinner asOverlay />}\n            <div className='form-control'>\n              <label htmlFor='username'>Name</label>\n              <input\n                type='text'\n                id='username'\n                placeholder='Enter Username'\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              />\n            </div>\n            <div className='form-control'>\n              <label htmlFor='email'>Email</label>\n              <input\n                type='email'\n                id='email'\n                placeholder='Enter Email'\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </div>\n\n            <div className='form-control'>\n              <label htmlFor='address'>Address</label>\n              <input\n                type='text'\n                id='address'\n                placeholder='Enter Address'\n                value={location}\n                onChange={(e) => setLocation(e.target.value)}\n              />\n            </div>\n\n            <div className='form-control'>\n              <label htmlFor='bio'>Bio</label>\n              <textarea\n                type='text'\n                id='bio'\n                placeholder='Write Bio'\n                value={bio}\n                onChange={(e) => setBio(e.target.value)}\n              />\n            </div>\n            <div className='form-control'>\n              <label htmlFor='password'>Password</label>\n              <input\n                type='password'\n                id='password'\n                placeholder='Enter Password'\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n            <div className='form-control'>\n              <label htmlFor='pasword2'>Confirm Password</label>\n              <input\n                type='password'\n                id='password2'\n                placeholder='Enter Password again'\n                value={confirmPassword}\n                onChange={(e) => setConfirmpassword(e.target.value)}\n              />\n            </div>\n\n            <Button type='submit'>SAVE PROFILE</Button>\n          </div>\n        </div>\n      </div>\n    </form>\n  );\n}\n\nexport default EditProfileScreen;\n"]},"metadata":{},"sourceType":"module"}