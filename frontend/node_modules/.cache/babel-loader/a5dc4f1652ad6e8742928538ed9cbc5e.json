{"ast":null,"code":"import _slicedToArray from\"/Users/pacifique/Desktop/UC/apps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import Input from'../../shared/components/FormElements/Input';import Button from'../../shared/components/FormElements/Button';import{Link}from'react-router-dom';import{LoginUser}from'../../Action/UserActions';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import Card from'../../shared/components/UIElements/Card';import{VALIDATOR_EMAIL,VALIDATOR_MINLENGTH}from'../../shared/util/validators';import{useForm}from'../../shared/hooks/form-hook';import'./Login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var location=_ref.location,history=_ref.history;var redirect=location.search?location.search.split('=')[1]:'/';var dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var error=userLogin.error,userInfo=userLogin.userInfo,loading=userLogin.loading;useEffect(function(){if(userInfo){history.push(redirect);}},[history,userInfo,redirect]);var _useForm=useForm({email:{value:'',isValid:false},password:{value:'',isValid:false}},false),_useForm2=_slicedToArray(_useForm,2),formState=_useForm2[0],inputHandler=_useForm2[1];var submitHandler=function submitHandler(e){e.preventDefault();dispatch(LoginUser(formState.inputs.email.value,formState.inputs.password.value));};return/*#__PURE__*/_jsx(\"form\",{onSubmit:submitHandler,children:/*#__PURE__*/_jsx(\"div\",{className:\"login-form-part\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-all\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login Here \"}),error&&/*#__PURE__*/_jsx(Card,{className:\"error_message\",children:error}),loading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsx(Input,{element:\"input\",id:\"email\",type:\"email\",label:\"E-Mail\",placeholder:\"Enter E-mail\",validators:[VALIDATOR_EMAIL()],errorText:\"Please enter a valid email address.\",onInput:inputHandler}),/*#__PURE__*/_jsx(Input,{element:\"input\",id:\"password\",type:\"password\",label:\"Password\",placeholder:\"Enter Password\",validators:[VALIDATOR_MINLENGTH(6)],errorText:\"Please enter a valid password, at least 6 characters.\",onInput:inputHandler}),/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:!formState.isValid,children:\"Login\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"New user?\",/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none',fontSize:'15px',marginLeft:'5px'},to:redirect?\"/register?redirect=\".concat(redirect):'/register',children:\"Register\"})]})]})})})});}export default Login;","map":{"version":3,"sources":["/Users/pacifique/Desktop/UC/apps/src/Users/Pages/Login.js"],"names":["React","useEffect","useSelector","useDispatch","Input","Button","Link","LoginUser","LoadingSpinner","Card","VALIDATOR_EMAIL","VALIDATOR_MINLENGTH","useForm","Login","location","history","redirect","search","split","dispatch","userLogin","state","error","userInfo","loading","push","email","value","isValid","password","formState","inputHandler","submitHandler","e","preventDefault","inputs","textDecoration","fontSize","marginLeft"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Input from '../../shared/components/FormElements/Input';\nimport Button from '../../shared/components/FormElements/Button';\nimport { Link } from 'react-router-dom';\nimport { LoginUser } from '../../Action/UserActions';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport Card from '../../shared/components/UIElements/Card';\nimport {\n  VALIDATOR_EMAIL,\n  VALIDATOR_MINLENGTH,\n} from '../../shared/util/validators';\nimport { useForm } from '../../shared/hooks/form-hook';\nimport './Login.css';\nfunction Login({ location, history }) {\n  const redirect = location.search ? location.search.split('=')[1] : '/';\n\n  const dispatch = useDispatch();\n  const userLogin = useSelector((state) => state.userLogin);\n  const { error, userInfo, loading } = userLogin;\n\n  useEffect(() => {\n    if (userInfo) {\n      history.push(redirect);\n    }\n  }, [history, userInfo, redirect]);\n\n  const [formState, inputHandler] = useForm(\n    {\n      email: {\n        value: '',\n        isValid: false,\n      },\n      password: {\n        value: '',\n        isValid: false,\n      },\n    },\n    false\n  );\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(\n      LoginUser(formState.inputs.email.value, formState.inputs.password.value)\n    );\n  };\n\n  return (\n    <form onSubmit={submitHandler}>\n      <div className='login-form-part'>\n        <div className='container-form'>\n          <div className='form-all'>\n            <h2>Login Here </h2>\n            {error && <Card className='error_message'>{error}</Card>}\n            {loading && <LoadingSpinner asOverlay />}\n            <Input\n              element='input'\n              id='email'\n              type='email'\n              label='E-Mail'\n              placeholder='Enter E-mail'\n              validators={[VALIDATOR_EMAIL()]}\n              errorText='Please enter a valid email address.'\n              onInput={inputHandler}\n            />\n            <Input\n              element='input'\n              id='password'\n              type='password'\n              label='Password'\n              placeholder='Enter Password'\n              validators={[VALIDATOR_MINLENGTH(6)]}\n              errorText='Please enter a valid password, at least 6 characters.'\n              onInput={inputHandler}\n            />\n            <Button type='submit' disabled={!formState.isValid}>\n              Login\n            </Button>\n            <h3>\n              New user?\n              <Link\n                style={{\n                  textDecoration: 'none',\n                  fontSize: '15px',\n                  marginLeft: '5px',\n                }}\n                to={redirect ? `/register?redirect=${redirect}` : '/register'}>\n                Register\n              </Link>\n            </h3>\n          </div>\n        </div>\n      </div>\n    </form>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}