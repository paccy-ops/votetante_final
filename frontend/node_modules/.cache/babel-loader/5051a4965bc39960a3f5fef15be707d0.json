{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pacifique/Desktop/UC/offiaclreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pacifique/Desktop/UC/offiaclreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/pacifique/Desktop/UC/offiaclreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Button from'../shared/components/FormElements/Button';import axios from'axios';import{useSelector,useDispatch}from'react-redux';import{Link}from'react-router-dom';import Card from'../shared/components/UIElements/Card';import LoadingSpinner from'../shared/components/UIElements/LoadingSpinner';import'./EditProfileScreen.css';import Notification from'../shared/components/UIElements/Notification';import{listPostDetails,PostUpdate}from'../Action/PostActions';import{POST_UPDATE_RESET}from'../constants/PostConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CreatePost(_ref){var match=_ref.match,history=_ref.history;var _useState=useState({isOpen:false,message:'',type:''}),_useState2=_slicedToArray(_useState,2),notify=_useState2[0],setNotify=_useState2[1];var postId=match.params.id;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),post_image=_useState8[0],setPost_image=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),uploading=_useState10[0],setUploading=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isActive=_useState12[0],setIsActive=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isApplying=_useState14[0],setIsApplying=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isVoting=_useState16[0],setIsVoting=_useState16[1];var dispatch=useDispatch();var postDetails=useSelector(function(state){return state.postDetails;});var loading=postDetails.loading,error=postDetails.error,post=postDetails.post;var postUpdate=useSelector(function(state){return state.postUpdate;});var successUpdate=postUpdate.success,errorUpdate=postUpdate.error,loadingUpdate=postUpdate.loading;useEffect(function(){if(successUpdate){dispatch({type:POST_UPDATE_RESET});history.push('/admin/posts');}else{if(!post.title||post.id!==Number(postId)){dispatch(listPostDetails(postId));}else{setTitle(post.title);setDescription(post.description);setPost_image(post.post_image);setIsActive(post.isActive);setIsApplying(post.isApplying);setIsVoting(post.isVoting);}}},[dispatch,history,successUpdate,post,postId]);var updateSubmitHandler=function updateSubmitHandler(e){e.preventDefault();dispatch(PostUpdate({id:postId,title:title,description:description,post_image:post_image,isActive:isActive,isApplying:isApplying,isVoting:isVoting}));setNotify({isOpen:true,message:'Submitted Successfully',type:'success'});};var uploadFileHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,formData,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];formData=new FormData();formData.append('post_image',file);formData.append('post_id',postId);setUploading(true);_context.prev=5;config={headers:{'Content-Type':'multipart/form-data'}};_context.next=9;return axios.post(process.env.REACT_APP_BACKEND_URL+'/posts/upload/',formData,config);case 9:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setPost_image(data);setUploading(false);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](5);setUploading(false);case 18:case\"end\":return _context.stop();}}},_callee,null,[[5,15]]);}));return function uploadFileHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/posts/\",children:/*#__PURE__*/_jsx(\"button\",{style:{position:'absolute',left:'200px',outline:'none'},type:\"button\",className:\"btn btn-outline-secondary\",children:\"GO BACK\"})}),/*#__PURE__*/_jsx(\"form\",{onSubmit:updateSubmitHandler,children:/*#__PURE__*/_jsx(\"div\",{className:\"login-form-register\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-form\",children:[errorUpdate&&/*#__PURE__*/_jsx(Card,{children:errorUpdate}),loadingUpdate&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),loading?/*#__PURE__*/_jsx(LoadingSpinner,{}):error?/*#__PURE__*/_jsx(Card,{children:error}):/*#__PURE__*/_jsxs(\"div\",{className:\"form-all\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"EDIT POST \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Post Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",placeholder:\"Enter Post Title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",id:\"description\",placeholder:\"Write a Description\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Upload Post Image\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"file\",id:\"image\",placeholder:\"Post Image\",value:post_image,onChange:function onChange(e){return setPost_image(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control form-control-lg\",id:\"formFileLg\",type:\"file\",onChange:uploadFileHandler}),uploading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-control\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-switch\",children:[/*#__PURE__*/_jsx(\"input\",{checked:isActive,onChange:function onChange(e){return setIsActive(e.target.checked);},className:\"form-check-input\",type:\"checkbox\",id:\"flexSwitchCheckDefault\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"flexSwitchCheckDefault\",children:\"Active\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-control\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-switch\",children:[/*#__PURE__*/_jsx(\"input\",{checked:isApplying,onChange:function onChange(e){return setIsApplying(e.target.checked);},className:\"form-check-input\",type:\"checkbox\",id:\"flexSwitchCheckDefaults\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-check-label\",htmlFor:\"flexSwitchCheckDefaults\",children:[\"Users Application\",' ']})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-control\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-switch\",children:[/*#__PURE__*/_jsx(\"input\",{checked:isVoting,onChange:function onChange(e){return setIsVoting(e.target.checked);},className:\"form-check-input\",type:\"checkbox\",id:\"flexSwitchCheckDefaults\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-check-label\",htmlFor:\"flexSwitchCheckDefaults\",children:[\"OnGoing vote\",' ']})]})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"SAVE UPDATES\"})]})]})})}),/*#__PURE__*/_jsx(Notification,{notify:notify,setNotify:setNotify})]});}export default CreatePost;","map":{"version":3,"sources":["/Users/pacifique/Desktop/UC/offiaclreact/src/screen/CreatePost.js"],"names":["React","useEffect","useState","Button","axios","useSelector","useDispatch","Link","Card","LoadingSpinner","Notification","listPostDetails","PostUpdate","POST_UPDATE_RESET","CreatePost","match","history","isOpen","message","type","notify","setNotify","postId","params","id","title","setTitle","description","setDescription","post_image","setPost_image","uploading","setUploading","isActive","setIsActive","isApplying","setIsApplying","isVoting","setIsVoting","dispatch","postDetails","state","loading","error","post","postUpdate","successUpdate","success","errorUpdate","loadingUpdate","push","Number","updateSubmitHandler","e","preventDefault","uploadFileHandler","file","target","files","formData","FormData","append","config","headers","process","env","REACT_APP_BACKEND_URL","data","position","left","outline","value","checked"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Button from '../shared/components/FormElements/Button';\nimport axios from 'axios';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport Card from '../shared/components/UIElements/Card';\nimport LoadingSpinner from '../shared/components/UIElements/LoadingSpinner';\nimport './EditProfileScreen.css';\nimport Notification from '../shared/components/UIElements/Notification';\nimport { listPostDetails, PostUpdate } from '../Action/PostActions';\nimport { POST_UPDATE_RESET } from '../constants/PostConstants';\n\nfunction CreatePost({ match, history }) {\n  const [notify, setNotify] = useState({\n    isOpen: false,\n    message: '',\n    type: '',\n  });\n  const postId = match.params.id;\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [post_image, setPost_image] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const [isActive, setIsActive] = useState(false);\n  const [isApplying, setIsApplying] = useState(false);\n  const [isVoting, setIsVoting] = useState(false);\n\n  const dispatch = useDispatch();\n\n  const postDetails = useSelector((state) => state.postDetails);\n  const { loading, error, post } = postDetails;\n\n  const postUpdate = useSelector((state) => state.postUpdate);\n  const {\n    success: successUpdate,\n    error: errorUpdate,\n    loading: loadingUpdate,\n  } = postUpdate;\n\n  useEffect(() => {\n    if (successUpdate) {\n      dispatch({ type: POST_UPDATE_RESET });\n      history.push('/admin/posts');\n    } else {\n      if (!post.title || post.id !== Number(postId)) {\n        dispatch(listPostDetails(postId));\n      } else {\n        setTitle(post.title);\n        setDescription(post.description);\n        setPost_image(post.post_image);\n        setIsActive(post.isActive);\n        setIsApplying(post.isApplying);\n        setIsVoting(post.isVoting);\n      }\n    }\n  }, [dispatch, history, successUpdate, post, postId]);\n\n  const updateSubmitHandler = (e) => {\n    e.preventDefault();\n\n    dispatch(\n      PostUpdate({\n        id: postId,\n        title,\n        description,\n        post_image,\n        isActive,\n        isApplying,\n        isVoting,\n      })\n    );\n    setNotify({\n      isOpen: true,\n      message: 'Submitted Successfully',\n      type: 'success',\n    });\n  };\n\n  const uploadFileHandler = async (e) => {\n    const file = e.target.files[0];\n    const formData = new FormData();\n\n    formData.append('post_image', file);\n    formData.append('post_id', postId);\n    setUploading(true);\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      };\n\n      const { data } = await axios.post(\n        process.env.REACT_APP_BACKEND_URL + '/posts/upload/',\n        formData,\n        config\n      );\n\n      setPost_image(data);\n\n      setUploading(false);\n    } catch (error) {\n      setUploading(false);\n    }\n  };\n  return (\n    <div>\n      <Link to='/admin/posts/'>\n        <button\n          style={{ position: 'absolute', left: '200px', outline: 'none' }}\n          type='button'\n          className='btn btn-outline-secondary'>\n          GO BACK\n        </button>\n      </Link>\n      <form onSubmit={updateSubmitHandler}>\n        <div className='login-form-register'>\n          <div className='container-form'>\n            {errorUpdate && <Card>{errorUpdate}</Card>}\n            {loadingUpdate && <LoadingSpinner asOverlay />}\n            {loading ? (\n              <LoadingSpinner />\n            ) : error ? (\n              <Card>{error}</Card>\n            ) : (\n              <div className='form-all'>\n                <h2>EDIT POST </h2>\n\n                <div className='form-control'>\n                  <label htmlFor='title'>Post Title</label>\n                  <input\n                    type='text'\n                    id='title'\n                    placeholder='Enter Post Title'\n                    value={title}\n                    onChange={(e) => setTitle(e.target.value)}\n                  />\n                </div>\n                <div className='form-control'>\n                  <label htmlFor='description'>Description</label>\n                  <textarea\n                    type='text'\n                    id='description'\n                    placeholder='Write a Description'\n                    value={description}\n                    onChange={(e) => setDescription(e.target.value)}\n                  />\n                </div>\n\n                <div className='form-control'>\n                  <label htmlFor='image'>Upload Post Image</label>\n                  <textarea\n                    type='file'\n                    id='image'\n                    placeholder='Post Image'\n                    value={post_image}\n                    onChange={(e) => setPost_image(e.target.value)}\n                  />\n                  <div>\n                    <input\n                      className='form-control form-control-lg'\n                      id='formFileLg'\n                      type='file'\n                      onChange={uploadFileHandler}\n                    />\n                    {uploading && <LoadingSpinner asOverlay />}\n                  </div>\n                </div>\n                <div className='form-control'>\n                  <div className='form-check form-switch'>\n                    <input\n                      checked={isActive}\n                      onChange={(e) => setIsActive(e.target.checked)}\n                      className='form-check-input'\n                      type='checkbox'\n                      id='flexSwitchCheckDefault'\n                    />\n                    <label\n                      className='form-check-label'\n                      htmlFor='flexSwitchCheckDefault'>\n                      Active\n                    </label>\n                  </div>\n                </div>\n                <div className='form-control'>\n                  <div className='form-check form-switch'>\n                    <input\n                      checked={isApplying}\n                      onChange={(e) => setIsApplying(e.target.checked)}\n                      className='form-check-input'\n                      type='checkbox'\n                      id='flexSwitchCheckDefaults'\n                    />\n                    <label\n                      className='form-check-label'\n                      htmlFor='flexSwitchCheckDefaults'>\n                      Users Application{' '}\n                    </label>\n                  </div>\n                </div>\n\n                <div className='form-control'>\n                  <div className='form-check form-switch'>\n                    <input\n                      checked={isVoting}\n                      onChange={(e) => setIsVoting(e.target.checked)}\n                      className='form-check-input'\n                      type='checkbox'\n                      id='flexSwitchCheckDefaults'\n                    />\n                    <label\n                      className='form-check-label'\n                      htmlFor='flexSwitchCheckDefaults'>\n                      OnGoing vote{' '}\n                    </label>\n                  </div>\n                </div>\n\n                <Button type='submit'>SAVE UPDATES</Button>\n              </div>\n            )}\n          </div>\n        </div>\n      </form>\n      <Notification notify={notify} setNotify={setNotify} />\n    </div>\n  );\n}\n\nexport default CreatePost;\n"]},"metadata":{},"sourceType":"module"}