{"ast":null,"code":"import _slicedToArray from\"/Users/pacifique/Desktop/UC/apps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./PostScreen.css';import{useSelector,useDispatch}from'react-redux';import{listPostDetails}from'../Action/PostActions';import LoadingSpinner from'../shared/components/UIElements/LoadingSpinner';import Card from'../shared/components/UIElements/Card';import{CandidateCreate}from'../Action/CandidateActions';import{APPLY_CREATE_RESET}from'../constants/CandidatesConstants';import{withRouter}from'react-router-dom';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PostScreen(_ref){var match=_ref.match,history=_ref.history;var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loadingData=_useState6[0],setLoadingData=_useState6[1];var postId=match.params.id;var createApplication=useSelector(function(state){return state.createApplication;});var successCreated=createApplication.success,loadingCreated=createApplication.loading,errorCreated=createApplication.error;var postDetails=useSelector(function(state){return state.postDetails;});var post=postDetails.post,loading=postDetails.loading,errors=postDetails.errors;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;// const candidate =post.candidates\nuseEffect(function(){dispatch({type:APPLY_CREATE_RESET});if(!userInfo){history.push('/login/user');}else if(successCreated){history.push(\"/user/candidate/\".concat(post.id,\"/edit\"));}else{if(errorCreated){setMessage(errorCreated);}if(successCreated){setMessage('Candidate added');}dispatch(listPostDetails(postId));if(post.candidates){setLoadingData(false);setData(post.candidates);}else{setData([]);setLoadingData(true);}}},[dispatch,postId,message,errorCreated,history,post,successCreated,userInfo]);var createCandidateHandler=function createCandidateHandler(e){e.preventDefault();dispatch(CandidateCreate(post.id));};if(loadingData){return/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true});}return/*#__PURE__*/_jsxs(\"div\",{className:\"main-post-details\",children:[loadingCreated&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),loading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),errors&&/*#__PURE__*/_jsx(Card,{children:errors}),/*#__PURE__*/_jsxs(\"div\",{className:\"section-image\",children:[/*#__PURE__*/_jsx(\"img\",{src:post.post_image,alt:post.title}),post.isApplying&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:createCandidateHandler,className:\"apply\",children:\"APPLY FOR THIS POST\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section-description\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"Title: \"}),post.title]}),/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"Post:\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:post.applications===10?'red':'#674305'},children:post.applications===10?'Closed':'Open'})]}),/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"Application: \"}),' ',post.applications]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"Description:\"}),' ',post.description]}),message&&/*#__PURE__*/_jsx(Card,{children:message}),errorCreated&&/*#__PURE__*/_jsx(Card,{children:errorCreated}),loadingCreated&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"active-application-bar\",style:{position:'absolute',top:'570px',left:'200px'},children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Active Application for\",' ',/*#__PURE__*/_jsx(\"span\",{style:{color:'seagreen',fontWeight:'900'},children:post.title})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"section-candidate\",children:data.map(function(postCandidate){return/*#__PURE__*/_jsx(\"div\",{children:postCandidate.isPass&&/*#__PURE__*/_jsx(\"div\",{className:\"posts\",children:/*#__PURE__*/_jsx(Link,{to:\"/post\",children:/*#__PURE__*/_jsx(\"div\",{className:\"description\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:postCandidate.candidate_image,alt:postCandidate.name}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'20px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'green'},children:\"Name:\"}),postCandidate.name]}),/*#__PURE__*/_jsxs(\"h4\",{style:{fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"spn\",{style:{color:'#000'},children:\"Applied For: \"}),/*#__PURE__*/_jsx(\"sp\",{children:postCandidate.title})]}),/*#__PURE__*/_jsxs(\"h4\",{style:{fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#000'},children:\"E-mail:\"}),' ',postCandidate.candidate_email]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'15px',width:'90%',marginLeft:'10px',fontFamily:'sans-serif'},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'10px',color:'seagreen'},children:\"Bio:\"}),postCandidate.bio.slice(1,100)]}),/*#__PURE__*/_jsx(Link,{to:\"/profile/candidates/\".concat(postCandidate.id),children:/*#__PURE__*/_jsx(\"button\",{children:\"View Profile\"})})]})})})})});})})]});}export default withRouter(PostScreen);","map":{"version":3,"sources":["/Users/pacifique/Desktop/UC/apps/src/screen/PostScreen.js"],"names":["React","useEffect","useState","useSelector","useDispatch","listPostDetails","LoadingSpinner","Card","CandidateCreate","APPLY_CREATE_RESET","withRouter","Link","PostScreen","match","history","dispatch","data","setData","message","setMessage","loadingData","setLoadingData","postId","params","id","createApplication","state","successCreated","success","loadingCreated","loading","errorCreated","error","postDetails","post","errors","userLogin","userInfo","type","push","candidates","createCandidateHandler","e","preventDefault","post_image","title","isApplying","color","applications","description","position","top","left","fontWeight","map","postCandidate","isPass","candidate_image","name","marginLeft","fontSize","candidate_email","width","fontFamily","marginRight","bio","slice"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './PostScreen.css';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { listPostDetails } from '../Action/PostActions';\nimport LoadingSpinner from '../shared/components/UIElements/LoadingSpinner';\nimport Card from '../shared/components/UIElements/Card';\nimport { CandidateCreate } from '../Action/CandidateActions';\nimport { APPLY_CREATE_RESET } from '../constants/CandidatesConstants';\nimport { withRouter } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\n\nfunction PostScreen({ match, history }) {\n  const dispatch = useDispatch();\n\n  const [data, setData] = useState([]);\n  const [message, setMessage] = useState([]);\n  const [loadingData, setLoadingData] = useState(false);\n\n  const postId = match.params.id;\n\n  const createApplication = useSelector((state) => state.createApplication);\n  const {\n    success: successCreated,\n    loading: loadingCreated,\n    error: errorCreated,\n  } = createApplication;\n\n  const postDetails = useSelector((state) => state.postDetails);\n  const { post, loading, errors } = postDetails;\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  // const candidate =post.candidates\n  useEffect(() => {\n    dispatch({ type: APPLY_CREATE_RESET });\n    if (!userInfo) {\n      history.push('/login/user');\n    } else if (successCreated) {\n      history.push(`/user/candidate/${post.id}/edit`);\n\n    } else {\n      if(errorCreated){\n        setMessage(errorCreated)\n      }\n      if(successCreated){\n        setMessage('Candidate added')\n      }\n      dispatch(listPostDetails(postId));\n      if (post.candidates) {\n        setLoadingData(false);\n        setData(post.candidates);\n      } else {\n        setData([]);\n        setLoadingData(true);\n      }\n    }\n  }, [dispatch, postId,message,errorCreated, history, post, successCreated, userInfo]);\n\n  const createCandidateHandler = (e) => {\n    e.preventDefault()\n    dispatch(CandidateCreate(post.id));\n  };\n\n  if (loadingData) {\n    return <LoadingSpinner asOverlay />;\n  }\n\n  return (\n    <div className='main-post-details'>\n      {loadingCreated && <LoadingSpinner asOverlay />}\n      {loading && <LoadingSpinner asOverlay />}\n      {errors && <Card>{errors}</Card>}\n      <div className='section-image'>\n     \n        <img src={post.post_image} alt={post.title} />\n        {post.isApplying&&  <button type=\"button\" onClick={createCandidateHandler} className='apply'>\n        APPLY FOR THIS POST\n      </button>}\n       \n      \n      </div>\n\n      <div className='section-description'>\n        <h1>\n          <span style={{ color: 'green' }}>Title: </span>\n          {post.title}\n        </h1>\n        <h1>\n          <span style={{ color: 'green' }}>Post:</span>\n          {\n            <span\n              style={{ color: post.applications === 10 ? 'red' : '#674305' }}>\n              {post.applications === 10 ? 'Closed' : 'Open'}\n            </span>\n          }\n        </h1>\n        <h1>\n          <span style={{ color: 'green' }}>Application: </span>{' '}\n          {post.applications}\n        </h1>\n        <p>\n          <span style={{ color: 'green' }}>Description:</span>{' '}\n          {post.description}\n        </p>\n        {message && <Card>{message}</Card>}\n        {errorCreated && <Card>{errorCreated}</Card>}\n        {loadingCreated && <LoadingSpinner asOverlay />}\n      </div>\n      <div\n        className='active-application-bar'\n        style={{\n          position: 'absolute',\n          top: '570px',\n          left: '200px',\n        }}>\n        <h1>\n          Active Application for{' '}\n          <span\n            style={{\n              color: 'seagreen',\n              fontWeight: '900',\n            }}>\n            {post.title}\n          </span>\n        </h1>\n      </div>\n      <div className='section-candidate'>\n        {data.map((postCandidate) => {\n          return (\n            <div>\n              {postCandidate.isPass && (\n                <div className='posts'>\n                  <Link to='/post'>\n                    <div className='description'>\n                      <div>\n                        <img\n                          src={postCandidate.candidate_image}\n                          alt={postCandidate.name}\n                        />\n                        <span style={{ marginLeft: '20px', fontSize: '12px' }}>\n                          <span style={{ color: 'green' }}>Name:</span>\n                          {postCandidate.name}\n                        </span>\n                        <h4 style={{ fontSize: '12px' }}>\n                          <spn style={{ color: '#000' }}>Applied For: </spn>\n                          <sp>{postCandidate.title}</sp>\n                        </h4>\n                        <h4 style={{ fontSize: '12px' }}>\n                          <span style={{ color: '#000' }}>E-mail:</span>{' '}\n                          {postCandidate.candidate_email}\n                        </h4>\n                        <p\n                          style={{\n                            fontSize: '15px',\n                            width: '90%',\n                            marginLeft: '10px',\n                            fontFamily: 'sans-serif',\n                          }}>\n                          <span\n                            style={{\n                              marginRight: '10px',\n                              color: 'seagreen',\n                            }}>\n                            Bio:\n                          </span>\n                          {postCandidate.bio.slice(1, 100)}\n                        </p>\n                        <Link to={`/profile/candidates/${postCandidate.id}`}>\n                          <button>View Profile</button>\n                        </Link>\n                      </div>\n                    </div>\n                  </Link>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default withRouter(PostScreen);\n"]},"metadata":{},"sourceType":"module"}